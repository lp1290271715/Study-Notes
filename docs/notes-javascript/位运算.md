

# 位运算

在ECMAScript中按位操作符会将操作数转换成32位带符号的二进制补码形式进行计算。

在JavaScript中位运算符有：

&(按位与)、|（按位或）、~（按位取反）、^（按位异或）、<<（有符号左移）、>>（有符号一位）,>>>（无符号右移）

### 位运算判断奇数偶数

```javascript
(n & 1) === 0
```

为true则n为偶数，false则n为奇数。

原因：位运算会将操作数转换为二进制补码的形式的有符号32位整数，1的二进制只有最后一位为1，偶数的最后一位为0，奇数的最后一位为1。任何数与1相与除了最后一位和符号位其他位都是0，因此偶数与1想与结果为0，奇数为1。

**几个特殊值：**

* 1

  1的二进制补码为00000000000000000000000000000001

  奇数 & 1 = 1

  偶数 & 1 = 0

* -1

  -1的二进制补码为11111111111111111111111111111111

  x & -1  = x (逻辑等于，实际上浮点数运算之后会舍去小数部分，后面的”=“都代表逻辑等于)

  利用位运算会忽略小数点的特点，可以实现向下取整操作

  **x & -1 === Math.floor(x)**

* 0

  0的二进制补码为000000000000000000000000000000000

  x & 0 = 0

  x | 0 = x

  **x | 0 === Math.floor(x)**

按位取反：

~~x = x

**~~x === Math.floor(x)**

左移，右移：

**x << 0 === Math.floor(x)  === x >> 0**

